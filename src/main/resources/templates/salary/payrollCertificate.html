<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout.html}">
<head>
    <meta charset="UTF-8">
    <title>급여 명세서</title>
    <link rel="stylesheet" href="/css/allowanceTotalView.css">
</head>
<body>
<div layout:fragment="content">
    <h2 class="title">급여 명세서</h2>
    <div class="header">
        <p>지급일: <span th:text="${month + '-01'}"></span></p>
        <table>
            <tr>
                <td>성명</td>
                <td th:text="${employee.name}"></td>
                <td>생년월일</td>
                <td th:text="${employee.birthDate}"></td>
            </tr>
            <tr>
                <td>부서</td>
                <td th:text="${employee.department.name}"></td>
                <td>직급</td>
                <td th:text="${employee.position.name}"></td>
            </tr>
        </table>
    </div>

    <h3>세부 내역</h3>
    <div style="display: flex; justify-content: space-between;">
        <!-- 지급 항목 테이블 -->
        <table style="width: 48%; border-collapse: collapse; border: 1px solid black;">
            <thead>
            <tr>
                <th>지급 항목</th>
                <th>금액</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>월 기본급</td>
                <td th:text="${#numbers.formatDecimal(salaryDetails['monthlySalary'],0,0)}"></td>
            </tr>
            <!-- 수당 -->
            <tr th:each="allowanceHeader : ${allowanceHeaders}">
                <td th:text="${allowanceHeader}"></td>
                <td th:text="${#numbers.formatDecimal(salaryDetails['allowanceDetails'].getOrDefault(allowanceHeader, 0.0),0,0)}"></td>
            </tr>
            </tbody>
        </table>

        <!-- 공제 항목 테이블 -->
        <table style="width: 48%; border-collapse: collapse; border: 1px solid black;">
            <thead>
            <tr>
                <th>공제 항목</th>
                <th>금액</th>
            </tr>
            </thead>
            <tbody>
            <!-- 공제 -->
            <tr th:each="deductionHeader : ${deductionHeaders}">
                <td th:text="${deductionHeader}"></td>
                <td th:text="${#numbers.formatDecimal(salaryDetails['deductionDetails'].getOrDefault(deductionHeader, 0.0),0,0)}"></td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- 합계 테이블 -->
    <table style="width: 100%; border-collapse: collapse; margin-top: 20px; border: 1px solid black;">
        <tfoot>
        <tr>
        <tr>
            <td>지급액 합계</td>
            <td th:text="${salaryDetails['totalAllowance']} + ${salaryDetails['monthlySalary']}"></td>
            <td>공제액 합계</td>
            <td th:text="${#numbers.formatDecimal(salaryDetails['totalDeductions'], 0, 0)}"></td>

        </tr>
        <tr>
            <td colspan="2">실수령액</td>
            <td colspan="2" th:text="${salaryDetails['monthlySalary']} + ${salaryDetails['totalAllowance']} - ${salaryDetails['totalDeductions']}"></td>
        </tr>
        </tfoot>
    </table>


    <h3>근로 시간 요약</h3>
    <table>
        <thead>
        <tr>
            <th>근로일수</th>
            <th>총 근로시간수</th>
            <th>야간근로시간수</th>
            <th>휴일근로시간수</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td th:text="${salaryDetails['totalPaidDays']}"></td>
            <td th:text="${salaryDetails['totalPaidHours']}"></td>
            <td th:text="${salaryDetails['overTimeHours']}"></td>
            <td th:text="${salaryDetails['holidayWorkHours']}"></td>
        </tr>
        </tbody>
    </table>

</div>
</body>
</html>
